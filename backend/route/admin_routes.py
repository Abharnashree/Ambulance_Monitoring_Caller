from flask import Blueprint, request, jsonify, render_template
import requests
from ..models import *
from ..extensions import db
from geoalchemy2.shape import from_shape
from geoalchemy2.functions import ST_GeomFromText, ST_DWithin, ST_Intersects, ST_Segmentize, ST_Transform, ST_AsText
from shapely.geometry import Point
from shapely.wkb import loads
import binascii
from datetime import datetime

admin = Blueprint('admin', __name__)

"""
Add ambulance - add_ambulance
init ambulances - init_db_with_dummy_data
Update ambulance - update_ambulance

"""

@admin.route("/", methods=['GET'])
def index():
    return render_template("index.html")

@admin.route("/test", methods=['GET', 'Post'])
def test():
    print("hello")
    # order = Order.query.filter_by(ambulance_id=230).first()  #update the order id for your testing
    # print(order.amb_caller_route)

    intersection = '0102000020E61000009C0000009C16BCE82B182A404087F9F2020E544046088F368E182A40C7BAB88D060E5440F14BFDBCA9182A4020D26F5F070E5440F14BFDBCA9182A40AE2AFBAE080E54407F130A1170182A40FCFB8C0B070E544063EE5A423E182A404BCD1E68050E5440B98D06F016182A40AB09A2EE030E544080D4264EEE172A40C4995FCD010E5440BA313D6189172A404ED1915CFE0D5440D734EF3845172A408B37328FFC0D5440BA2C26361F172A40EB73B515FB0D5440BBD573D2FB162A40E02D90A0F80D5440D881734694162A402098A3C7EF0D54402E39EE940E162A400E10CCD1E30D5440D95A5F24B4152A40CB67791EDC0D5440F7CC920035152A4012F758FAD00D5440BFD4CF9B8A142A409D11A5BDC10D54406B2BF697DD132A4092AE997CB30D54406CB2463D44132A40CFF753E3A50D544033164D6727132A407D0569C6A20D544033F9669B1B132A402B137EA99F0D5440A5A0DB4B1A132A401DACFF73980D54401895D40968122A40E86A2BF6970D5440FC1873D712122A407DE882FA960D5440191C25AFCE112A40DD240681950D5440C47762D68B112A4073A25D85940D5440C45A7C0A80112A403D618907940D5440FD82DDB06D112A40D3DEE00B930D54403737A6272C112A40448655BC910D544054573ECBF3102A40DA03ADC0900D5440C5FEB27BF2102A40B62DCA6C900D54401BF5108DEE102A409357E718900D5440E3AAB2EF8A102A40ABE7A4F78D0D5440AAF1D24D62102A4053D0ED258D0D5440384A5E9D63102A40B30C71AC8B0D5440E38DCC237F102A40B3D2A414740D544038A1100187102A40930035B56C0D544038842A357B102A408195438B6C0D5440C7293A92CB0F2A409604A8A9650D5440906B43C5380F2A403ACC9717600D5440C971A774B00E2A40481630815B0D5440CAC342AD690E2A402C6519E2580D5440CA897615520E2A40AF777FBC570D5440202922C32A0E2A40B79C4B71550D544020B58993FB0D2A401EFE9AAC510D5440AF42CA4FAA0D2A408C84B69C4B0D5440E8F692C6680D2A409ACE4E06470D54403E5C72DC290D2A40CCEEC9C3420D544005C078060D0D2A40616C21C8410D5440CEA5B8AAEC0B2A40E882FA96390D54405EA27A6B600B2A40F0A7C64B370D54407AFCDEA63F0B2A40DE3CD521370D5440D0ED258DD10A2A40BA66F2CD360D5440276BD443340A2A40A9FB00A4360D5440999EB0C4030A2A4073BA2C26360D54400BD28C45D3092A40D3F6AFAC340D54400C59DDEA39092A40FAD005F52D0D54407FDE54A4C2082A40D3D9C9E0280D544046B1DCD26A082A403A3B191C250D5440BA1457957D072A409335EA211A0D5440103B53E8BC062A40C2340C1F110D5440BBD05CA791062A40FE9AAC510F0D5440F415A4198B062A40454772F90F0D54402D5BEB8B84062A4057B26323100D54406666666666062A4033DC80CF0F0D54402E39EE940E062A404C6C3EAE0D0D5440F6EE8FF7AA052A409B3DD00A0C0D54404C37894160052A4065FCFB8C0B0D5440DB8AFD65F7042A4065FCFB8C0B0D5440143FC6DCB5042A409B3DD00A0C0D5440BFD4CF9B8A042A40172B6A300D0D5440DC2E34D769042A40A583F57F0E0D5440F8A57EDE54042A407B884677100D5440A375543541042A40CC7A3194130D5440DC9DB5DB2E042A40ACC5A700180D54404E2844C021042A40456458C51B0D5440323D618907042A40707CED99250D5440F9DA334B02042A4050C763062A0D54406B82A8FB00042A4005172B6A300D54404ED1915CFE032A404CC3F011310D5440C078060DFD032A408104C58F310D54408750A5660F042A407AFCDEA63F0D5440319413ED2A042A40016A6AD95A0D5440DCBA9BA73A042A40CC457C27660D5440A3923A014D042A407A7077D66E0D5440BF7D1D3867042A40E1EEACDD760D5440DB85E63A8D042A400F289B72850D5440F870C971A7042A40CFBD874B8E0D54404DA1F31ABB042A407DE882FA960D544030478FDFDB042A403659A31EA20D5440130A117008052A40F90FE9B7AF0D5440850838842A052A4048FE60E0B90D5440DA1B7C6132052A40F20703CFBD0D5440137EA99F37052A40C0E78711C20D5440139B8F6B43052A405682C5E1CC0D5440BEA4315A47052A403DF20703CF0D5440F697DD9387052A40BD1DE1B4E00D54404BAB21718F052A40390B7BDAE10D5440F60B76C3B6052A40F9A067B3EA0D5440849ECDAACF052A40728A8EE4F20D5440F59CF4BEF1052A40A7E8482EFF0D5440834C327216062A4059349D9D0C0E5440D8B628B341062A40200C3CF71E0E5440BC5CC47762062A405C8FC2F5280E5440117008556A062A40DC9DB5DB2E0E5440F4F8BD4D7F062A4063D17476320E5440BB270F0BB5062A4000917EFB3A0E544065FCFB8C0B072A406A300DC3470E5440102384471B072A40757632384A0E54406536C82423072A40BC22F8DF4A0E5440D7FA22A12D072A40F163CC5D4B0E5440BA83D89942072A404356B77A4E0E54409E0C8E9257072A40A7B393C1510E54400F62670A9D072A40D1CB28965B0E54400FB9196EC0072A402E043928610E5440D6AD9E93DE072A40AE122C0E670E5440B9196EC0E7072A4071AC8BDB680E5440F27B9BFEEC072A4046B1DCD26A0E54400E2DB29DEF072A40C39E76F86B0E5440642310AFEB072A40F1BA7EC16E0E54409D685721E5072A4066834C32720E5440F25EB532E1072A40D105F52D730E544064E94317D4072A404DF38E53740E54409D11A5BDC1072A40EDB60BCD750E544064AF777FBC072A406AA4A5F2760E54409DF4BEF1B5072A407C0F971C770E544048C49448A2072A40D5264EEE770E54402C6519E258072A402619390B7B0E5440F4FDD478E9062A405F7B6649800E54402E90A0F831062A40545227A0890E544085251E5036052A408AB0E1E9950E5440695721E527052A402A745E63970E54404DBED9E6C6042A40516B9A779C0E544086032159C0042A40BBED42739D0E54404DA1F31ABB042A406D1CB1169F0E54404D840D4FAF042A404D672783A30E5440A3E9EC6470042A402D095053CB0E5440C009850838042A408577B988EF0E5440F91400E319042A40EC12D55B030F5440325A475513042A4085B18520070F544015C616821C042A40DEC83CF2070F5440F931E6AE25042A405BB6D617090F5440C0EC9E3C2C042A40C5387F130A0F54404E62105839042A400CE544BB0A0F544014E8137992042A40ACA8C1340C0F5440F7AFAC3429052A40EC2FBB270F0F5440850838842A052A40B7EEE6A90E0F54401361C3D32B052A404C6C3EAE0D0F5440A1B94E232D052A4005C078060D0F5440F7CC920035052A40BE13B35E0C0F54402FDD240681052A405ED72FD80D0F544068791EDC9D052A40295C8FC2F50E5440672C9ACE4E062A4034A2B437F80E5440BB44F5D6C0062A40E5D022DBF90E54404985B18520072A40A96A82A8FB0E54402CD49AE61D072A401E335019FF0E5440:0102000020E61000009C0000009C16BCE82B182A404087F9F2020E544046088F368E182A40C7BAB88D060E5440F14BFDBCA9182A4020D26F5F070E5440F14BFDBCA9182A40AE2AFBAE080E54407F130A1170182A40FCFB8C0B070E544063EE5A423E182A404BCD1E68050E5440B98D06F016182A40AB09A2EE030E544080D4264EEE172A40C4995FCD010E5440BA313D6189172A404ED1915CFE0D5440D734EF3845172A408B37328FFC0D5440BA2C26361F172A40EB73B515FB0D5440BBD573D2FB162A40E02D90A0F80D5440D881734694162A402098A3C7EF0D54402E39EE940E162A400E10CCD1E30D5440D95A5F24B4152A40CB67791EDC0D5440F7CC920035152A4012F758FAD00D5440BFD4CF9B8A142A409D11A5BDC10D54406B2BF697DD132A4092AE997CB30D54406CB2463D44132A40CFF753E3A50D544033164D6727132A407D0569C6A20D544033F9669B1B132A402B137EA99F0D5440A5A0DB4B1A132A401DACFF73980D54401895D40968122A40E86A2BF6970D5440FC1873D712122A407DE882FA960D5440191C25AFCE112A40DD240681950D5440C47762D68B112A4073A25D85940D5440C45A7C0A80112A403D618907940D5440FD82DDB06D112A40D3DEE00B930D54403737A6272C112A40448655BC910D544054573ECBF3102A40DA03ADC0900D5440C5FEB27BF2102A40B62DCA6C900D54401BF5108DEE102A409357E718900D5440E3AAB2EF8A102A40ABE7A4F78D0D5440AAF1D24D62102A4053D0ED258D0D5440384A5E9D63102A40B30C71AC8B0D5440E38DCC237F102A40B3D2A414740D544038A1100187102A40930035B56C0D544038842A357B102A408195438B6C0D5440C7293A92CB0F2A409604A8A9650D5440906B43C5380F2A403ACC9717600D5440C971A774B00E2A40481630815B0D5440CAC342AD690E2A402C6519E2580D5440CA897615520E2A40AF777FBC570D5440202922C32A0E2A40B79C4B71550D544020B58993FB0D2A401EFE9AAC510D5440AF42CA4FAA0D2A408C84B69C4B0D5440E8F692C6680D2A409ACE4E06470D54403E5C72DC290D2A40CCEEC9C3420D544005C078060D0D2A40616C21C8410D5440CEA5B8AAEC0B2A40E882FA96390D54405EA27A6B600B2A40F0A7C64B370D54407AFCDEA63F0B2A40DE3CD521370D5440D0ED258DD10A2A40BA66F2CD360D5440276BD443340A2A40A9FB00A4360D5440999EB0C4030A2A4073BA2C26360D54400BD28C45D3092A40D3F6AFAC340D54400C59DDEA39092A40FAD005F52D0D54407FDE54A4C2082A40D3D9C9E0280D544046B1DCD26A082A403A3B191C250D5440BA1457957D072A409335EA211A0D5440103B53E8BC062A40C2340C1F110D5440BBD05CA791062A40FE9AAC510F0D5440F415A4198B062A40454772F90F0D54402D5BEB8B84062A4057B26323100D54406666666666062A4033DC80CF0F0D54402E39EE940E062A404C6C3EAE0D0D5440F6EE8FF7AA052A409B3DD00A0C0D54404C37894160052A4065FCFB8C0B0D5440DB8AFD65F7042A4065FCFB8C0B0D5440143FC6DCB5042A409B3DD00A0C0D5440BFD4CF9B8A042A40172B6A300D0D5440DC2E34D769042A40A583F57F0E0D5440F8A57EDE54042A407B884677100D5440A375543541042A40CC7A3194130D5440DC9DB5DB2E042A40ACC5A700180D54404E2844C021042A40456458C51B0D5440323D618907042A40707CED99250D5440F9DA334B02042A4050C763062A0D54406B82A8FB00042A4005172B6A300D54404ED1915CFE032A404CC3F011310D5440C078060DFD032A408104C58F310D54408750A5660F042A407AFCDEA63F0D5440319413ED2A042A40016A6AD95A0D5440DCBA9BA73A042A40CC457C27660D5440A3923A014D042A407A7077D66E0D5440BF7D1D3867042A40E1EEACDD760D5440DB85E63A8D042A400F289B72850D5440F870C971A7042A40CFBD874B8E0D54404DA1F31ABB042A407DE882FA960D544030478FDFDB042A403659A31EA20D5440130A117008052A40F90FE9B7AF0D5440850838842A052A4048FE60E0B90D5440DA1B7C6132052A40F20703CFBD0D5440137EA99F37052A40C0E78711C20D5440139B8F6B43052A405682C5E1CC0D5440BEA4315A47052A403DF20703CF0D5440F697DD9387052A40BD1DE1B4E00D54404BAB21718F052A40390B7BDAE10D5440F60B76C3B6052A40F9A067B3EA0D5440849ECDAACF052A40728A8EE4F20D5440F59CF4BEF1052A40A7E8482EFF0D5440834C327216062A4059349D9D0C0E5440D8B628B341062A40200C3CF71E0E5440BC5CC47762062A405C8FC2F5280E5440117008556A062A40DC9DB5DB2E0E5440F4F8BD4D7F062A4063D17476320E5440BB270F0BB5062A4000917EFB3A0E544065FCFB8C0B072A406A300DC3470E5440102384471B072A40757632384A0E54406536C82423072A40BC22F8DF4A0E5440D7FA22A12D072A40F163CC5D4B0E5440BA83D89942072A404356B77A4E0E54409E0C8E9257072A40A7B393C1510E54400F62670A9D072A40D1CB28965B0E54400FB9196EC0072A402E043928610E5440D6AD9E93DE072A40AE122C0E670E5440B9196EC0E7072A4071AC8BDB680E5440F27B9BFEEC072A4046B1DCD26A0E54400E2DB29DEF072A40C39E76F86B0E5440642310AFEB072A40F1BA7EC16E0E54409D685721E5072A4066834C32720E5440F25EB532E1072A40D105F52D730E544064E94317D4072A404DF38E53740E54409D11A5BDC1072A40EDB60BCD750E544064AF777FBC072A406AA4A5F2760E54409DF4BEF1B5072A407C0F971C770E544048C49448A2072A40D5264EEE770E54402C6519E258072A402619390B7B0E5440F4FDD478E9062A405F7B6649800E54402E90A0F831062A40545227A0890E544085251E5036052A408AB0E1E9950E5440695721E527052A402A745E63970E54404DBED9E6C6042A40516B9A779C0E544086032159C0042A40BBED42739D0E54404DA1F31ABB042A406D1CB1169F0E54404D840D4FAF042A404D672783A30E5440A3E9EC6470042A402D095053CB0E5440C009850838042A408577B988EF0E5440F91400E319042A40EC12D55B030F5440325A475513042A4085B18520070F544015C616821C042A40DEC83CF2070F5440F931E6AE25042A405BB6D617090F5440C0EC9E3C2C042A40C5387F130A0F54404E62105839042A400CE544BB0A0F544014E8137992042A40ACA8C1340C0F5440F7AFAC3429052A40EC2FBB270F0F5440850838842A052A40B7EEE6A90E0F54401361C3D32B052A404C6C3EAE0D0F5440A1B94E232D052A4005C078060D0F5440F7CC920035052A40BE13B35E0C0F54402FDD240681052A405ED72FD80D0F544068791EDC9D052A40295C8FC2F50E5440672C9ACE4E062A4034A2B437F80E5440BB44F5D6C0062A40E5D022DBF90E54404985B18520072A40A96A82A8FB0E54402CD49AE61D072A401E335019FF0E5440:0102000020E61000009C0000009C16BCE82B182A404087F9F2020E544046088F368E182A40C7BAB88D060E5440F14BFDBCA9182A4020D26F5F070E5440F14BFDBCA9182A40AE2AFBAE080E54407F130A1170182A40FCFB8C0B070E544063EE5A423E182A404BCD1E68050E5440B98D06F016182A40AB09A2EE030E544080D4264EEE172A40C4995FCD010E5440BA313D6189172A404ED1915CFE0D5440D734EF3845172A408B37328FFC0D5440BA2C26361F172A40EB73B515FB0D5440BBD573D2FB162A40E02D90A0F80D5440D881734694162A402098A3C7EF0D54402E39EE940E162A400E10CCD1E30D5440D95A5F24B4152A40CB67791EDC0D5440F7CC920035152A4012F758FAD00D5440BFD4CF9B8A142A409D11A5BDC10D54406B2BF697DD132A4092AE997CB30D54406CB2463D44132A40CFF753E3A50D544033164D6727132A407D0569C6A20D544033F9669B1B132A402B137EA99F0D5440A5A0DB4B1A132A401DACFF73980D54401895D40968122A40E86A2BF6970D5440FC1873D712122A407DE882FA960D5440191C25AFCE112A40DD240681950D5440C47762D68B112A4073A25D85940D5440C45A7C0A80112A403D618907940D5440FD82DDB06D112A40D3DEE00B930D54403737A6272C112A40448655BC910D544054573ECBF3102A40DA03ADC0900D5440C5FEB27BF2102A40B62DCA6C900D54401BF5108DEE102A409357E718900D5440E3AAB2EF8A102A40ABE7A4F78D0D5440AAF1D24D62102A4053D0ED258D0D5440384A5E9D63102A40B30C71AC8B0D5440E38DCC237F102A40B3D2A414740D544038A1100187102A40930035B56C0D544038842A357B102A408195438B6C0D5440C7293A92CB0F2A409604A8A9650D5440906B43C5380F2A403ACC9717600D5440C971A774B00E2A40481630815B0D5440CAC342AD690E2A402C6519E2580D5440CA897615520E2A40AF777FBC570D5440202922C32A0E2A40B79C4B71550D544020B58993FB0D2A401EFE9AAC510D5440AF42CA4FAA0D2A408C84B69C4B0D5440E8F692C6680D2A409ACE4E06470D54403E5C72DC290D2A40CCEEC9C3420D544005C078060D0D2A40616C21C8410D5440CEA5B8AAEC0B2A40E882FA96390D54405EA27A6B600B2A40F0A7C64B370D54407AFCDEA63F0B2A40DE3CD521370D5440D0ED258DD10A2A40BA66F2CD360D5440276BD443340A2A40A9FB00A4360D5440999EB0C4030A2A4073BA2C26360D54400BD28C45D3092A40D3F6AFAC340D54400C59DDEA39092A40FAD005F52D0D54407FDE54A4C2082A40D3D9C9E0280D544046B1DCD26A082A403A3B191C250D5440BA1457957D072A409335EA211A0D5440103B53E8BC062A40C2340C1F110D5440BBD05CA791062A40FE9AAC510F0D5440F415A4198B062A40454772F90F0D54402D5BEB8B84062A4057B26323100D54406666666666062A4033DC80CF0F0D54402E39EE940E062A404C6C3EAE0D0D5440F6EE8FF7AA052A409B3DD00A0C0D54404C37894160052A4065FCFB8C0B0D5440DB8AFD65F7042A4065FCFB8C0B0D5440143FC6DCB5042A409B3DD00A0C0D5440BFD4CF9B8A042A40172B6A300D0D5440DC2E34D769042A40A583F57F0E0D5440F8A57EDE54042A407B884677100D5440A375543541042A40CC7A3194130D5440DC9DB5DB2E042A40ACC5A700180D54404E2844C021042A40456458C51B0D5440323D618907042A40707CED99250D5440F9DA334B02042A4050C763062A0D54406B82A8FB00042A4005172B6A300D54404ED1915CFE032A404CC3F011310D5440C078060DFD032A408104C58F310D54408750A5660F042A407AFCDEA63F0D5440319413ED2A042A40016A6AD95A0D5440DCBA9BA73A042A40CC457C27660D5440A3923A014D042A407A7077D66E0D5440BF7D1D3867042A40E1EEACDD760D5440DB85E63A8D042A400F289B72850D5440F870C971A7042A40CFBD874B8E0D54404DA1F31ABB042A407DE882FA960D544030478FDFDB042A403659A31EA20D5440130A117008052A40F90FE9B7AF0D5440850838842A052A4048FE60E0B90D5440DA1B7C6132052A40F20703CFBD0D5440137EA99F37052A40C0E78711C20D5440139B8F6B43052A405682C5E1CC0D5440BEA4315A47052A403DF20703CF0D5440F697DD9387052A40BD1DE1B4E00D54404BAB21718F052A40390B7BDAE10D5440F60B76C3B6052A40F9A067B3EA0D5440849ECDAACF052A40728A8EE4F20D5440F59CF4BEF1052A40A7E8482EFF0D5440834C327216062A4059349D9D0C0E5440D8B628B341062A40200C3CF71E0E5440BC5CC47762062A405C8FC2F5280E5440117008556A062A40DC9DB5DB2E0E5440F4F8BD4D7F062A4063D17476320E5440BB270F0BB5062A4000917EFB3A0E544065FCFB8C0B072A406A300DC3470E5440102384471B072A40757632384A0E54406536C82423072A40BC22F8DF4A0E5440D7FA22A12D072A40F163CC5D4B0E5440BA83D89942072A404356B77A4E0E54409E0C8E9257072A40A7B393C1510E54400F62670A9D072A40D1CB28965B0E54400FB9196EC0072A402E043928610E5440D6AD9E93DE072A40AE122C0E670E5440B9196EC0E7072A4071AC8BDB680E5440F27B9BFEEC072A4046B1DCD26A0E54400E2DB29DEF072A40C39E76F86B0E5440642310AFEB072A40F1BA7EC16E0E54409D685721E5072A4066834C32720E5440F25EB532E1072A40D105F52D730E544064E94317D4072A404DF38E53740E54409D11A5BDC1072A40EDB60BCD750E544064AF777FBC072A406AA4A5F2760E54409DF4BEF1B5072A407C0F971C770E544048C49448A2072A40D5264EEE770E54402C6519E258072A402619390B7B0E5440F4FDD478E9062A405F7B6649800E54402E90A0F831062A40545227A0890E544085251E5036052A408AB0E1E9950E5440695721E527052A402A745E63970E54404DBED9E6C6042A40516B9A779C0E544086032159C0042A40BBED42739D0E54404DA1F31ABB042A406D1CB1169F0E54404D840D4FAF042A404D672783A30E5440A3E9EC6470042A402D095053CB0E5440C009850838042A408577B988EF0E5440F91400E319042A40EC12D55B030F5440325A475513042A4085B18520070F544015C616821C042A40DEC83CF2070F5440F931E6AE25042A405BB6D617090F5440C0EC9E3C2C042A40C5387F130A0F54404E62105839042A400CE544BB0A0F544014E8137992042A40ACA8C1340C0F5440F7AFAC3429052A40EC2FBB270F0F5440850838842A052A40B7EEE6A90E0F54401361C3D32B052A404C6C3EAE0D0F5440A1B94E232D052A4005C078060D0F5440F7CC920035052A40BE13B35E0C0F54402FDD240681052A405ED72FD80D0F544068791EDC9D052A40295C8FC2F50E5440672C9ACE4E062A4034A2B437F80E5440BB44F5D6C0062A40E5D022DBF90E54404985B18520072A40A96A82A8FB0E54402CD49AE61D072A401E335019FF0E5440:0102000020E61000009C0000009C16BCE82B182A404087F9F2020E544046088F368E182A40C7BAB88D060E5440F14BFDBCA9182A4020D26F5F070E5440F14BFDBCA9182A40AE2AFBAE080E54407F130A1170182A40FCFB8C0B070E544063EE5A423E182A404BCD1E68050E5440B98D06F016182A40AB09A2EE030E544080D4264EEE172A40C4995FCD010E5440BA313D6189172A404ED1915CFE0D5440D734EF3845172A408B37328FFC0D5440BA2C26361F172A40EB73B515FB0D5440BBD573D2FB162A40E02D90A0F80D5440D881734694162A402098A3C7EF0D54402E39EE940E162A400E10CCD1E30D5440D95A5F24B4152A40CB67791EDC0D5440F7CC920035152A4012F758FAD00D5440BFD4CF9B8A142A409D11A5BDC10D54406B2BF697DD132A4092AE997CB30D54406CB2463D44132A40CFF753E3A50D544033164D6727132A407D0569C6A20D544033F9669B1B132A402B137EA99F0D5440A5A0DB4B1A132A401DACFF73980D54401895D40968122A40E86A2BF6970D5440FC1873D712122A407DE882FA960D5440191C25AFCE112A40DD240681950D5440C47762D68B112A4073A25D85940D5440C45A7C0A80112A403D618907940D5440FD82DDB06D112A40D3DEE00B930D54403737A6272C112A40448655BC910D544054573ECBF3102A40DA03ADC0900D5440C5FEB27BF2102A40B62DCA6C900D54401BF5108DEE102A409357E718900D5440E3AAB2EF8A102A40ABE7A4F78D0D5440AAF1D24D62102A4053D0ED258D0D5440384A5E9D63102A40B30C71AC8B0D5440E38DCC237F102A40B3D2A414740D544038A1100187102A40930035B56C0D544038842A357B102A408195438B6C0D5440C7293A92CB0F2A409604A8A9650D5440906B43C5380F2A403ACC9717600D5440C971A774B00E2A40481630815B0D5440CAC342AD690E2A402C6519E2580D5440CA897615520E2A40AF777FBC570D5440202922C32A0E2A40B79C4B71550D544020B58993FB0D2A401EFE9AAC510D5440AF42CA4FAA0D2A408C84B69C4B0D5440E8F692C6680D2A409ACE4E06470D54403E5C72DC290D2A40CCEEC9C3420D544005C078060D0D2A40616C21C8410D5440CEA5B8AAEC0B2A40E882FA96390D54405EA27A6B600B2A40F0A7C64B370D54407AFCDEA63F0B2A40DE3CD521370D5440D0ED258DD10A2A40BA66F2CD360D5440276BD443340A2A40A9FB00A4360D5440999EB0C4030A2A4073BA2C26360D54400BD28C45D3092A40D3F6AFAC340D54400C59DDEA39092A40FAD005F52D0D54407FDE54A4C2082A40D3D9C9E0280D544046B1DCD26A082A403A3B191C250D5440BA1457957D072A409335EA211A0D5440103B53E8BC062A40C2340C1F110D5440BBD05CA791062A40FE9AAC510F0D5440F415A4198B062A40454772F90F0D54402D5BEB8B84062A4057B26323100D54406666666666062A4033DC80CF0F0D54402E39EE940E062A404C6C3EAE0D0D5440F6EE8FF7AA052A409B3DD00A0C0D54404C37894160052A4065FCFB8C0B0D5440DB8AFD65F7042A4065FCFB8C0B0D5440143FC6DCB5042A409B3DD00A0C0D5440BFD4CF9B8A042A40172B6A300D0D5440DC2E34D769042A40A583F57F0E0D5440F8A57EDE54042A407B884677100D5440A375543541042A40CC7A3194130D5440DC9DB5DB2E042A40ACC5A700180D54404E2844C021042A40456458C51B0D5440323D618907042A40707CED99250D5440F9DA334B02042A4050C763062A0D54406B82A8FB00042A4005172B6A300D54404ED1915CFE032A404CC3F011310D5440C078060DFD032A408104C58F310D54408750A5660F042A407AFCDEA63F0D5440319413ED2A042A40016A6AD95A0D5440DCBA9BA73A042A40CC457C27660D5440A3923A014D042A407A7077D66E0D5440BF7D1D3867042A40E1EEACDD760D5440DB85E63A8D042A400F289B72850D5440F870C971A7042A40CFBD874B8E0D54404DA1F31ABB042A407DE882FA960D544030478FDFDB042A403659A31EA20D5440130A117008052A40F90FE9B7AF0D5440850838842A052A4048FE60E0B90D5440DA1B7C6132052A40F20703CFBD0D5440137EA99F37052A40C0E78711C20D5440139B8F6B43052A405682C5E1CC0D5440BEA4315A47052A403DF20703CF0D5440F697DD9387052A40BD1DE1B4E00D54404BAB21718F052A40390B7BDAE10D5440F60B76C3B6052A40F9A067B3EA0D5440849ECDAACF052A40728A8EE4F20D5440F59CF4BEF1052A40A7E8482EFF0D5440834C327216062A4059349D9D0C0E5440D8B628B341062A40200C3CF71E0E5440BC5CC47762062A405C8FC2F5280E5440117008556A062A40DC9DB5DB2E0E5440F4F8BD4D7F062A4063D17476320E5440BB270F0BB5062A4000917EFB3A0E544065FCFB8C0B072A406A300DC3470E5440102384471B072A40757632384A0E54406536C82423072A40BC22F8DF4A0E5440D7FA22A12D072A40F163CC5D4B0E5440BA83D89942072A404356B77A4E0E54409E0C8E9257072A40A7B393C1510E54400F62670A9D072A40D1CB28965B0E54400FB9196EC0072A402E043928610E5440D6AD9E93DE072A40AE122C0E670E5440B9196EC0E7072A4071AC8BDB680E5440F27B9BFEEC072A4046B1DCD26A0E54400E2DB29DEF072A40C39E76F86B0E5440642310AFEB072A40F1BA7EC16E0E54409D685721E5072A4066834C32720E5440F25EB532E1072A40D105F52D730E544064E94317D4072A404DF38E53740E54409D11A5BDC1072A40EDB60BCD750E544064AF777FBC072A406AA4A5F2760E54409DF4BEF1B5072A407C0F971C770E544048C49448A2072A40D5264EEE770E54402C6519E258072A402619390B7B0E5440F4FDD478E9062A405F7B6649800E54402E90A0F831062A40545227A0890E544085251E5036052A408AB0E1E9950E5440695721E527052A402A745E63970E54404DBED9E6C6042A40516B9A779C0E544086032159C0042A40BBED42739D0E54404DA1F31ABB042A406D1CB1169F0E54404D840D4FAF042A404D672783A30E5440A3E9EC6470042A402D095053CB0E5440C009850838042A408577B988EF0E5440F91400E319042A40EC12D55B030F5440325A475513042A4085B18520070F544015C616821C042A40DEC83CF2070F5440F931E6AE25042A405BB6D617090F5440C0EC9E3C2C042A40C5387F130A0F54404E62105839042A400CE544BB0A0F544014E8137992042A40ACA8C1340C0F5440F7AFAC3429052A40EC2FBB270F0F5440850838842A052A40B7EEE6A90E0F54401361C3D32B052A404C6C3EAE0D0F5440A1B94E232D052A4005C078060D0F5440F7CC920035052A40BE13B35E0C0F54402FDD240681052A405ED72FD80D0F544068791EDC9D052A40295C8FC2F50E5440672C9ACE4E062A4034A2B437F80E5440BB44F5D6C0062A40E5D022DBF90E54404985B18520072A40A96A82A8FB0E54402CD49AE61D072A401E335019FF0E5440:0102000020E61000009C0000009C16BCE82B182A404087F9F2020E544046088F368E182A40C7BAB88D060E5440F14BFDBCA9182A4020D26F5F070E5440F14BFDBCA9182A40AE2AFBAE080E54407F130A1170182A40FCFB8C0B070E544063EE5A423E182A404BCD1E68050E5440B98D06F016182A40AB09A2EE030E544080D4264EEE172A40C4995FCD010E5440BA313D6189172A404ED1915CFE0D5440D734EF3845172A408B37328FFC0D5440BA2C26361F172A40EB73B515FB0D5440BBD573D2FB162A40E02D90A0F80D5440D881734694162A402098A3C7EF0D54402E39EE940E162A400E10CCD1E30D5440D95A5F24B4152A40CB67791EDC0D5440F7CC920035152A4012F758FAD00D5440BFD4CF9B8A142A409D11A5BDC10D54406B2BF697DD132A4092AE997CB30D54406CB2463D44132A40CFF753E3A50D544033164D6727132A407D0569C6A20D544033F9669B1B132A402B137EA99F0D5440A5A0DB4B1A132A401DACFF73980D54401895D40968122A40E86A2BF6970D5440FC1873D712122A407DE882FA960D5440191C25AFCE112A40DD240681950D5440C47762D68B112A4073A25D85940D5440C45A7C0A80112A403D618907940D5440FD82DDB06D112A40D3DEE00B930D54403737A6272C112A40448655BC910D544054573ECBF3102A40DA03ADC0900D5440C5FEB27BF2102A40B62DCA6C900D54401BF5108DEE102A409357E718900D5440E3AAB2EF8A102A40ABE7A4F78D0D5440AAF1D24D62102A4053D0ED258D0D5440384A5E9D63102A40B30C71AC8B0D5440E38DCC237F102A40B3D2A414740D544038A1100187102A40930035B56C0D544038842A357B102A408195438B6C0D5440C7293A92CB0F2A409604A8A9650D5440906B43C5380F2A403ACC9717600D5440C971A774B00E2A40481630815B0D5440CAC342AD690E2A402C6519E2580D5440CA897615520E2A40AF777FBC570D5440202922C32A0E2A40B79C4B71550D544020B58993FB0D2A401EFE9AAC510D5440AF42CA4FAA0D2A408C84B69C4B0D5440E8F692C6680D2A409ACE4E06470D54403E5C72DC290D2A40CCEEC9C3420D544005C078060D0D2A40616C21C8410D5440CEA5B8AAEC0B2A40E882FA96390D54405EA27A6B600B2A40F0A7C64B370D54407AFCDEA63F0B2A40DE3CD521370D5440D0ED258DD10A2A40BA66F2CD360D5440276BD443340A2A40A9FB00A4360D5440999EB0C4030A2A4073BA2C26360D54400BD28C45D3092A40D3F6AFAC340D54400C59DDEA39092A40FAD005F52D0D54407FDE54A4C2082A40D3D9C9E0280D544046B1DCD26A082A403A3B191C250D5440BA1457957D072A409335EA211A0D5440103B53E8BC062A40C2340C1F110D5440BBD05CA791062A40FE9AAC510F0D5440F415A4198B062A40454772F90F0D54402D5BEB8B84062A4057B26323100D54406666666666062A4033DC80CF0F0D54402E39EE940E062A404C6C3EAE0D0D5440F6EE8FF7AA052A409B3DD00A0C0D54404C37894160052A4065FCFB8C0B0D5440DB8AFD65F7042A4065FCFB8C0B0D5440143FC6DCB5042A409B3DD00A0C0D5440BFD4CF9B8A042A40172B6A300D0D5440DC2E34D769042A40A583F57F0E0D5440F8A57EDE54042A407B884677100D5440A375543541042A40CC7A3194130D5440DC9DB5DB2E042A40ACC5A700180D54404E2844C021042A40456458C51B0D5440323D618907042A40707CED99250D5440F9DA334B02042A4050C763062A0D54406B82A8FB00042A4005172B6A300D54404ED1915CFE032A404CC3F011310D5440C078060DFD032A408104C58F310D54408750A5660F042A407AFCDEA63F0D5440319413ED2A042A40016A6AD95A0D5440DCBA9BA73A042A40CC457C27660D5440A3923A014D042A407A7077D66E0D5440BF7D1D3867042A40E1EEACDD760D5440DB85E63A8D042A400F289B72850D5440F870C971A7042A40CFBD874B8E0D54404DA1F31ABB042A407DE882FA960D544030478FDFDB042A403659A31EA20D5440130A117008052A40F90FE9B7AF0D5440850838842A052A4048FE60E0B90D5440DA1B7C6132052A40F20703CFBD0D5440137EA99F37052A40C0E78711C20D5440139B8F6B43052A405682C5E1CC0D5440BEA4315A47052A403DF20703CF0D5440F697DD9387052A40BD1DE1B4E00D54404BAB21718F052A40390B7BDAE10D5440F60B76C3B6052A40F9A067B3EA0D5440849ECDAACF052A40728A8EE4F20D5440F59CF4BEF1052A40A7E8482EFF0D5440834C327216062A4059349D9D0C0E5440D8B628B341062A40200C3CF71E0E5440BC5CC47762062A405C8FC2F5280E5440117008556A062A40DC9DB5DB2E0E5440F4F8BD4D7F062A4063D17476320E5440BB270F0BB5062A4000917EFB3A0E544065FCFB8C0B072A406A300DC3470E5440102384471B072A40757632384A0E54406536C82423072A40BC22F8DF4A0E5440D7FA22A12D072A40F163CC5D4B0E5440BA83D89942072A404356B77A4E0E54409E0C8E9257072A40A7B393C1510E54400F62670A9D072A40D1CB28965B0E54400FB9196EC0072A402E043928610E5440D6AD9E93DE072A40AE122C0E670E5440B9196EC0E7072A4071AC8BDB680E5440F27B9BFEEC072A4046B1DCD26A0E54400E2DB29DEF072A40C39E76F86B0E5440642310AFEB072A40F1BA7EC16E0E54409D685721E5072A4066834C32720E5440F25EB532E1072A40D105F52D730E544064E94317D4072A404DF38E53740E54409D11A5BDC1072A40EDB60BCD750E544064AF777FBC072A406AA4A5F2760E54409DF4BEF1B5072A407C0F971C770E544048C49448A2072A40D5264EEE770E54402C6519E258072A402619390B7B0E5440F4FDD478E9062A405F7B6649800E54402E90A0F831062A40545227A0890E544085251E5036052A408AB0E1E9950E5440695721E527052A402A745E63970E54404DBED9E6C6042A40516B9A779C0E544086032159C0042A40BBED42739D0E54404DA1F31ABB042A406D1CB1169F0E54404D840D4FAF042A404D672783A30E5440A3E9EC6470042A402D095053CB0E5440C009850838042A408577B988EF0E5440F91400E319042A40EC12D55B030F5440325A475513042A4085B18520070F544015C616821C042A40DEC83CF2070F5440F931E6AE25042A405BB6D617090F5440C0EC9E3C2C042A40C5387F130A0F54404E62105839042A400CE544BB0A0F544014E8137992042A40ACA8C1340C0F5440F7AFAC3429052A40EC2FBB270F0F5440850838842A052A40B7EEE6A90E0F54401361C3D32B052A404C6C3EAE0D0F5440A1B94E232D052A4005C078060D0F5440F7CC920035052A40BE13B35E0C0F54402FDD240681052A405ED72FD80D0F544068791EDC9D052A40295C8FC2F50E5440672C9ACE4E062A4034A2B437F80E5440BB44F5D6C0062A40E5D022DBF90E54404985B18520072A40A96A82A8FB0E54402CD49AE61D072A401E335019FF0E5440:0102000020E61000009C0000009C16BCE82B182A404087F9F2020E544046088F368E182A40C7BAB88D060E5440F14BFDBCA9182A4020D26F5F070E5440F14BFDBCA9182A40AE2AFBAE080E54407F130A1170182A40FCFB8C0B070E544063EE5A423E182A404BCD1E68050E5440B98D06F016182A40AB09A2EE030E544080D4264EEE172A40C4995FCD010E5440BA313D6189172A404ED1915CFE0D5440D734EF3845172A408B37328FFC0D5440BA2C26361F172A40EB73B515FB0D5440BBD573D2FB162A40E02D90A0F80D5440D881734694162A402098A3C7EF0D54402E39EE940E162A400E10CCD1E30D5440D95A5F24B4152A40CB67791EDC0D5440F7CC920035152A4012F758FAD00D5440BFD4CF9B8A142A409D11A5BDC10D54406B2BF697DD132A4092AE997CB30D54406CB2463D44132A40CFF753E3A50D544033164D6727132A407D0569C6A20D544033F9669B1B132A402B137EA99F0D5440A5A0DB4B1A132A401DACFF73980D54401895D40968122A40E86A2BF6970D5440FC1873D712122A407DE882FA960D5440191C25AFCE112A40DD240681950D5440C47762D68B112A4073A25D85940D5440C45A7C0A80112A403D618907940D5440FD82DDB06D112A40D3DEE00B930D54403737A6272C112A40448655BC910D544054573ECBF3102A40DA03ADC0900D5440C5FEB27BF2102A40B62DCA6C900D54401BF5108DEE102A409357E718900D5440E3AAB2EF8A102A40ABE7A4F78D0D5440AAF1D24D62102A4053D0ED258D0D5440384A5E9D63102A40B30C71AC8B0D5440E38DCC237F102A40B3D2A414740D544038A1100187102A40930035B56C0D544038842A357B102A408195438B6C0D5440C7293A92CB0F2A409604A8A9650D5440906B43C5380F2A403ACC9717600D5440C971A774B00E2A40481630815B0D5440CAC342AD690E2A402C6519E2580D5440CA897615520E2A40AF777FBC570D5440202922C32A0E2A40B79C4B71550D544020B58993FB0D2A401EFE9AAC510D5440AF42CA4FAA0D2A408C84B69C4B0D5440E8F692C6680D2A409ACE4E06470D54403E5C72DC290D2A40CCEEC9C3420D544005C078060D0D2A40616C21C8410D5440CEA5B8AAEC0B2A40E882FA96390D54405EA27A6B600B2A40F0A7C64B370D54407AFCDEA63F0B2A40DE3CD521370D5440D0ED258DD10A2A40BA66F2CD360D5440276BD443340A2A40A9FB00A4360D5440999EB0C4030A2A4073BA2C26360D54400BD28C45D3092A40D3F6AFAC340D54400C59DDEA39092A40FAD005F52D0D54407FDE54A4C2082A40D3D9C9E0280D544046B1DCD26A082A403A3B191C250D5440BA1457957D072A409335EA211A0D5440103B53E8BC062A40C2340C1F110D5440BBD05CA791062A40FE9AAC510F0D5440F415A4198B062A40454772F90F0D54402D5BEB8B84062A4057B26323100D54406666666666062A4033DC80CF0F0D54402E39EE940E062A404C6C3EAE0D0D5440F6EE8FF7AA052A409B3DD00A0C0D54404C37894160052A4065FCFB8C0B0D5440DB8AFD65F7042A4065FCFB8C0B0D5440143FC6DCB5042A409B3DD00A0C0D5440BFD4CF9B8A042A40172B6A300D0D5440DC2E34D769042A40A583F57F0E0D5440F8A57EDE54042A407B884677100D5440A375543541042A40CC7A3194130D5440DC9DB5DB2E042A40ACC5A700180D54404E2844C021042A40456458C51B0D5440323D618907042A40707CED99250D5440F9DA334B02042A4050C763062A0D54406B82A8FB00042A4005172B6A300D54404ED1915CFE032A404CC3F011310D5440C078060DFD032A408104C58F310D54408750A5660F042A407AFCDEA63F0D5440319413ED2A042A40016A6AD95A0D5440DCBA9BA73A042A40CC457C27660D5440A3923A014D042A407A7077D66E0D5440BF7D1D3867042A40E1EEACDD760D5440DB85E63A8D042A400F289B72850D5440F870C971A7042A40CFBD874B8E0D54404DA1F31ABB042A407DE882FA960D544030478FDFDB042A403659A31EA20D5440130A117008052A40F90FE9B7AF0D5440850838842A052A4048FE60E0B90D5440DA1B7C6132052A40F20703CFBD0D5440137EA99F37052A40C0E78711C20D5440139B8F6B43052A405682C5E1CC0D5440BEA4315A47052A403DF20703CF0D5440F697DD9387052A40BD1DE1B4E00D54404BAB21718F052A40390B7BDAE10D5440F60B76C3B6052A40F9A067B3EA0D5440849ECDAACF052A40728A8EE4F20D5440F59CF4BEF1052A40A7E8482EFF0D5440834C327216062A4059349D9D0C0E5440D8B628B341062A40200C3CF71E0E5440BC5CC47762062A405C8FC2F5280E5440117008556A062A40DC9DB5DB2E0E5440F4F8BD4D7F062A4063D17476320E5440BB270F0BB5062A4000917EFB3A0E544065FCFB8C0B072A406A300DC3470E5440102384471B072A40757632384A0E54406536C82423072A40BC22F8DF4A0E5440D7FA22A12D072A40F163CC5D4B0E5440BA83D89942072A404356B77A4E0E54409E0C8E9257072A40A7B393C1510E54400F62670A9D072A40D1CB28965B0E54400FB9196EC0072A402E043928610E5440D6AD9E93DE072A40AE122C0E670E5440B9196EC0E7072A4071AC8BDB680E5440F27B9BFEEC072A4046B1DCD26A0E54400E2DB29DEF072A40C39E76F86B0E5440642310AFEB072A40F1BA7EC16E0E54409D685721E5072A4066834C32720E5440F25EB532E1072A40D105F52D730E544064E94317D4072A404DF38E53740E54409D11A5BDC1072A40EDB60BCD750E544064AF777FBC072A406AA4A5F2760E54409DF4BEF1B5072A407C0F971C770E544048C49448A2072A40D5264EEE770E54402C6519E258072A402619390B7B0E5440F4FDD478E9062A405F7B6649800E54402E90A0F831062A40545227A0890E544085251E5036052A408AB0E1E9950E5440695721E527052A402A745E63970E54404DBED9E6C6042A40516B9A779C0E544086032159C0042A40BBED42739D0E54404DA1F31ABB042A406D1CB1169F0E54404D840D4FAF042A404D672783A30E5440A3E9EC6470042A402D095053CB0E5440C009850838042A408577B988EF0E5440F91400E319042A40EC12D55B030F5440325A475513042A4085B18520070F544015C616821C042A40DEC83CF2070F5440F931E6AE25042A405BB6D617090F5440C0EC9E3C2C042A40C5387F130A0F54404E62105839042A400CE544BB0A0F544014E8137992042A40ACA8C1340C0F5440F7AFAC3429052A40EC2FBB270F0F5440850838842A052A40B7EEE6A90E0F54401361C3D32B052A404C6C3EAE0D0F5440A1B94E232D052A4005C078060D0F5440F7CC920035052A40BE13B35E0C0F54402FDD240681052A405ED72FD80D0F544068791EDC9D052A40295C8FC2F50E5440672C9ACE4E062A4034A2B437F80E5440BB44F5D6C0062A40E5D022DBF90E54404985B18520072A40A96A82A8FB0E54402CD49AE61D072A401E335019FF0E5440:0102000020E61000009C0000009C16BCE82B182A404087F9F2020E544046088F368E182A40C7BAB88D060E5440F14BFDBCA9182A4020D26F5F070E5440F14BFDBCA9182A40AE2AFBAE080E54407F130A1170182A40FCFB8C0B070E544063EE5A423E182A404BCD1E68050E5440B98D06F016182A40AB09A2EE030E544080D4264EEE172A40C4995FCD010E5440BA313D6189172A404ED1915CFE0D5440D734EF3845172A408B37328FFC0D5440BA2C26361F172A40EB73B515FB0D5440BBD573D2FB162A40E02D90A0F80D5440D881734694162A402098A3C7EF0D54402E39EE940E162A400E10CCD1E30D5440D95A5F24B4152A40CB67791EDC0D5440F7CC920035152A4012F758FAD00D5440BFD4CF9B8A142A409D11A5BDC10D54406B2BF697DD132A4092AE997CB30D54406CB2463D44132A40CFF753E3A50D544033164D6727132A407D0569C6A20D544033F9669B1B132A402B137EA99F0D5440A5A0DB4B1A132A401DACFF73980D54401895D40968122A40E86A2BF6970D5440FC1873D712122A407DE882FA960D5440191C25AFCE112A40DD240681950D5440C47762D68B112A4073A25D85940D5440C45A7C0A80112A403D618907940D5440FD82DDB06D112A40D3DEE00B930D54403737A6272C112A40448655BC910D544054573ECBF3102A40DA03ADC0900D5440C5FEB27BF2102A40B62DCA6C900D54401BF5108DEE102A409357E718900D5440E3AAB2EF8A102A40ABE7A4F78D0D5440AAF1D24D62102A4053D0ED258D0D5440384A5E9D63102A40B30C71AC8B0D5440E38DCC237F102A40B3D2A414740D544038A1100187102A40930035B56C0D544038842A357B102A408195438B6C0D5440C7293A92CB0F2A409604A8A9650D5440906B43C5380F2A403ACC9717600D5440C971A774B00E2A40481630815B0D5440CAC342AD690E2A402C6519E2580D5440CA897615520E2A40AF777FBC570D5440202922C32A0E2A40B79C4B71550D544020B58993FB0D2A401EFE9AAC510D5440AF42CA4FAA0D2A408C84B69C4B0D5440E8F692C6680D2A409ACE4E06470D54403E5C72DC290D2A40CCEEC9C3420D544005C078060D0D2A40616C21C8410D5440CEA5B8AAEC0B2A40E882FA96390D54405EA27A6B600B2A40F0A7C64B370D54407AFCDEA63F0B2A40DE3CD521370D5440D0ED258DD10A2A40BA66F2CD360D5440276BD443340A2A40A9FB00A4360D5440999EB0C4030A2A4073BA2C26360D54400BD28C45D3092A40D3F6AFAC340D54400C59DDEA39092A40FAD005F52D0D54407FDE54A4C2082A40D3D9C9E0280D544046B1DCD26A082A403A3B191C250D5440BA1457957D072A409335EA211A0D5440103B53E8BC062A40C2340C1F110D5440BBD05CA791062A40FE9AAC510F0D5440F415A4198B062A40454772F90F0D54402D5BEB8B84062A4057B26323100D54406666666666062A4033DC80CF0F0D54402E39EE940E062A404C6C3EAE0D0D5440F6EE8FF7AA052A409B3DD00A0C0D54404C37894160052A4065FCFB8C0B0D5440DB8AFD65F7042A4065FCFB8C0B0D5440143FC6DCB5042A409B3DD00A0C0D5440BFD4CF9B8A042A40172B6A300D0D5440DC2E34D769042A40A583F57F0E0D5440F8A57EDE54042A407B884677100D5440A375543541042A40CC7A3194130D5440DC9DB5DB2E042A40ACC5A700180D54404E2844C021042A40456458C51B0D5440323D618907042A40707CED99250D5440F9DA334B02042A4050C763062A0D54406B82A8FB00042A4005172B6A300D54404ED1915CFE032A404CC3F011310D5440C078060DFD032A408104C58F310D54408750A5660F042A407AFCDEA63F0D5440319413ED2A042A40016A6AD95A0D5440DCBA9BA73A042A40CC457C27660D5440A3923A014D042A407A7077D66E0D5440BF7D1D3867042A40E1EEACDD760D5440DB85E63A8D042A400F289B72850D5440F870C971A7042A40CFBD874B8E0D54404DA1F31ABB042A407DE882FA960D544030478FDFDB042A403659A31EA20D5440130A117008052A40F90FE9B7AF0D5440850838842A052A4048FE60E0B90D5440DA1B7C6132052A40F20703CFBD0D5440137EA99F37052A40C0E78711C20D5440139B8F6B43052A405682C5E1CC0D5440BEA4315A47052A403DF20703CF0D5440F697DD9387052A40BD1DE1B4E00D54404BAB21718F052A40390B7BDAE10D5440F60B76C3B6052A40F9A067B3EA0D5440849ECDAACF052A40728A8EE4F20D5440F59CF4BEF1052A40A7E8482EFF0D5440834C327216062A4059349D9D0C0E5440D8B628B341062A40200C3CF71E0E5440BC5CC47762062A405C8FC2F5280E5440117008556A062A40DC9DB5DB2E0E5440F4F8BD4D7F062A4063D17476320E5440BB270F0BB5062A4000917EFB3A0E544065FCFB8C0B072A406A300DC3470E5440102384471B072A40757632384A0E54406536C82423072A40BC22F8DF4A0E5440D7FA22A12D072A40F163CC5D4B0E5440BA83D89942072A404356B77A4E0E54409E0C8E9257072A40A7B393C1510E54400F62670A9D072A40D1CB28965B0E54400FB9196EC0072A402E043928610E5440D6AD9E93DE072A40AE122C0E670E5440B9196EC0E7072A4071AC8BDB680E5440F27B9BFEEC072A4046B1DCD26A0E54400E2DB29DEF072A40C39E76F86B0E5440642310AFEB072A40F1BA7EC16E0E54409D685721E5072A4066834C32720E5440F25EB532E1072A40D105F52D730E544064E94317D4072A404DF38E53740E54409D11A5BDC1072A40EDB60BCD750E544064AF777FBC072A406AA4A5F2760E54409DF4BEF1B5072A407C0F971C770E544048C49448A2072A40D5264EEE770E54402C6519E258072A402619390B7B0E5440F4FDD478E9062A405F7B6649800E54402E90A0F831062A40545227A0890E544085251E5036052A408AB0E1E9950E5440695721E527052A402A745E63970E54404DBED9E6C6042A40516B9A779C0E544086032159C0042A40BBED42739D0E54404DA1F31ABB042A406D1CB1169F0E54404D840D4FAF042A404D672783A30E5440A3E9EC6470042A402D095053CB0E5440C009850838042A408577B988EF0E5440F91400E319042A40EC12D55B030F5440325A475513042A4085B18520070F544015C616821C042A40DEC83CF2070F5440F931E6AE25042A405BB6D617090F5440C0EC9E3C2C042A40C5387F130A0F54404E62105839042A400CE544BB0A0F544014E8137992042A40ACA8C1340C0F5440F7AFAC3429052A40EC2FBB270F0F5440850838842A052A40B7EEE6A90E0F54401361C3D32B052A404C6C3EAE0D0F5440A1B94E232D052A4005C078060D0F5440F7CC920035052A40BE13B35E0C0F54402FDD240681052A405ED72FD80D0F544068791EDC9D052A40295C8FC2F50E5440672C9ACE4E062A4034A2B437F80E5440BB44F5D6C0062A40E5D022DBF90E54404985B18520072A40A96A82A8FB0E54402CD49AE61D072A401E335019FF0E5440'
    line = '0102000020E61000009C0000009C16BCE82B182A404087F9F2020E544046088F368E182A40C7BAB88D060E5440F14BFDBCA9182A4020D26F5F070E5440F14BFDBCA9182A40AE2AFBAE080E54407F130A1170182A40FCFB8C0B070E544063EE5A423E182A404BCD1E68050E5440B98D06F016182A40AB09A2EE030E544080D4264EEE172A40C4995FCD010E5440BA313D6189172A404ED1915CFE0D5440D734EF3845172A408B37328FFC0D5440BA2C26361F172A40EB73B515FB0D5440BBD573D2FB162A40E02D90A0F80D5440D881734694162A402098A3C7EF0D54402E39EE940E162A400E10CCD1E30D5440D95A5F24B4152A40CB67791EDC0D5440F7CC920035152A4012F758FAD00D5440BFD4CF9B8A142A409D11A5BDC10D54406B2BF697DD132A4092AE997CB30D54406CB2463D44132A40CFF753E3A50D544033164D6727132A407D0569C6A20D544033F9669B1B132A402B137EA99F0D5440A5A0DB4B1A132A401DACFF73980D54401895D40968122A40E86A2BF6970D5440FC1873D712122A407DE882FA960D5440191C25AFCE112A40DD240681950D5440C47762D68B112A4073A25D85940D5440C45A7C0A80112A403D618907940D5440FD82DDB06D112A40D3DEE00B930D54403737A6272C112A40448655BC910D544054573ECBF3102A40DA03ADC0900D5440C5FEB27BF2102A40B62DCA6C900D54401BF5108DEE102A409357E718900D5440E3AAB2EF8A102A40ABE7A4F78D0D5440AAF1D24D62102A4053D0ED258D0D5440384A5E9D63102A40B30C71AC8B0D5440E38DCC237F102A40B3D2A414740D544038A1100187102A40930035B56C0D544038842A357B102A408195438B6C0D5440C7293A92CB0F2A409604A8A9650D5440906B43C5380F2A403ACC9717600D5440C971A774B00E2A40481630815B0D5440CAC342AD690E2A402C6519E2580D5440CA897615520E2A40AF777FBC570D5440202922C32A0E2A40B79C4B71550D544020B58993FB0D2A401EFE9AAC510D5440AF42CA4FAA0D2A408C84B69C4B0D5440E8F692C6680D2A409ACE4E06470D54403E5C72DC290D2A40CCEEC9C3420D544005C078060D0D2A40616C21C8410D5440CEA5B8AAEC0B2A40E882FA96390D54405EA27A6B600B2A40F0A7C64B370D54407AFCDEA63F0B2A40DE3CD521370D5440D0ED258DD10A2A40BA66F2CD360D5440276BD443340A2A40A9FB00A4360D5440999EB0C4030A2A4073BA2C26360D54400BD28C45D3092A40D3F6AFAC340D54400C59DDEA39092A40FAD005F52D0D54407FDE54A4C2082A40D3D9C9E0280D544046B1DCD26A082A403A3B191C250D5440BA1457957D072A409335EA211A0D5440103B53E8BC062A40C2340C1F110D5440BBD05CA791062A40FE9AAC510F0D5440F415A4198B062A40454772F90F0D54402D5BEB8B84062A4057B26323100D54406666666666062A4033DC80CF0F0D54402E39EE940E062A404C6C3EAE0D0D5440F6EE8FF7AA052A409B3DD00A0C0D54404C37894160052A4065FCFB8C0B0D5440DB8AFD65F7042A4065FCFB8C0B0D5440143FC6DCB5042A409B3DD00A0C0D5440BFD4CF9B8A042A40172B6A300D0D5440DC2E34D769042A40A583F57F0E0D5440F8A57EDE54042A407B884677100D5440A375543541042A40CC7A3194130D5440DC9DB5DB2E042A40ACC5A700180D54404E2844C021042A40456458C51B0D5440323D618907042A40707CED99250D5440F9DA334B02042A4050C763062A0D54406B82A8FB00042A4005172B6A300D54404ED1915CFE032A404CC3F011310D5440C078060DFD032A408104C58F310D54408750A5660F042A407AFCDEA63F0D5440319413ED2A042A40016A6AD95A0D5440DCBA9BA73A042A40CC457C27660D5440A3923A014D042A407A7077D66E0D5440BF7D1D3867042A40E1EEACDD760D5440DB85E63A8D042A400F289B72850D5440F870C971A7042A40CFBD874B8E0D54404DA1F31ABB042A407DE882FA960D544030478FDFDB042A403659A31EA20D5440130A117008052A40F90FE9B7AF0D5440850838842A052A4048FE60E0B90D5440DA1B7C6132052A40F20703CFBD0D5440137EA99F37052A40C0E78711C20D5440139B8F6B43052A405682C5E1CC0D5440BEA4315A47052A403DF20703CF0D5440F697DD9387052A40BD1DE1B4E00D54404BAB21718F052A40390B7BDAE10D5440F60B76C3B6052A40F9A067B3EA0D5440849ECDAACF052A40728A8EE4F20D5440F59CF4BEF1052A40A7E8482EFF0D5440834C327216062A4059349D9D0C0E5440D8B628B341062A40200C3CF71E0E5440BC5CC47762062A405C8FC2F5280E5440117008556A062A40DC9DB5DB2E0E5440F4F8BD4D7F062A4063D17476320E5440BB270F0BB5062A4000917EFB3A0E544065FCFB8C0B072A406A300DC3470E5440102384471B072A40757632384A0E54406536C82423072A40BC22F8DF4A0E5440D7FA22A12D072A40F163CC5D4B0E5440BA83D89942072A404356B77A4E0E54409E0C8E9257072A40A7B393C1510E54400F62670A9D072A40D1CB28965B0E54400FB9196EC0072A402E043928610E5440D6AD9E93DE072A40AE122C0E670E5440B9196EC0E7072A4071AC8BDB680E5440F27B9BFEEC072A4046B1DCD26A0E54400E2DB29DEF072A40C39E76F86B0E5440642310AFEB072A40F1BA7EC16E0E54409D685721E5072A4066834C32720E5440F25EB532E1072A40D105F52D730E544064E94317D4072A404DF38E53740E54409D11A5BDC1072A40EDB60BCD750E544064AF777FBC072A406AA4A5F2760E54409DF4BEF1B5072A407C0F971C770E544048C49448A2072A40D5264EEE770E54402C6519E258072A402619390B7B0E5440F4FDD478E9062A405F7B6649800E54402E90A0F831062A40545227A0890E544085251E5036052A408AB0E1E9950E5440695721E527052A402A745E63970E54404DBED9E6C6042A40516B9A779C0E544086032159C0042A40BBED42739D0E54404DA1F31ABB042A406D1CB1169F0E54404D840D4FAF042A404D672783A30E5440A3E9EC6470042A402D095053CB0E5440C009850838042A408577B988EF0E5440F91400E319042A40EC12D55B030F5440325A475513042A4085B18520070F544015C616821C042A40DEC83CF2070F5440F931E6AE25042A405BB6D617090F5440C0EC9E3C2C042A40C5387F130A0F54404E62105839042A400CE544BB0A0F544014E8137992042A40ACA8C1340C0F5440F7AFAC3429052A40EC2FBB270F0F5440850838842A052A40B7EEE6A90E0F54401361C3D32B052A404C6C3EAE0D0F5440A1B94E232D052A4005C078060D0F5440F7CC920035052A40BE13B35E0C0F54402FDD240681052A405ED72FD80D0F544068791EDC9D052A40295C8FC2F50E5440672C9ACE4E062A4034A2B437F80E5440BB44F5D6C0062A40E5D022DBF90E54404985B18520072A40A96A82A8FB0E54402CD49AE61D072A401E335019FF0E5440'
    print(ST_AsText(intersection))
    print(ST_AsText(line))
    # for geom in order.traffic_light_intersection_proximity:
    #     print(geom)
    #     # print(ST_AsText(geom))
    
    return jsonify("done")

@admin.route('/add_ambulance', methods=['POST'])
def add_ambulance():
    data = request.json

    if not data.get('ambulance_id') or not data.get('type'):
        return jsonify({"message": "Missing data for ambulance id or type!"}), 400

    ambulance_id = data.get('ambulance_id')
    ambulance_type = data.get('type')

    existing_ambulance = Ambulance.query.filter_by(id=ambulance_id).first()
    if existing_ambulance:
        return jsonify({"message": "Ambulance with this ID already exists!"}), 409

    ambulance = Ambulance(id=ambulance_id, type=ambulance_type)
    db.session.add(ambulance)
    db.session.commit()

    return jsonify({"message": "Ambulance added successfully!"}), 201


@admin.route('/init_db_with_dummy_data', methods=['POST'])
def init_db_with_dummy_data():
    db.create_all()
    overpass_url = "https://overpass-api.de/api/interpreter"
    CHENNAI_BBOX = "13.0,80.0,13.1,80.3"

    overpass_query = f"""
    [out:json];
    (
    node["amenity"="hospital"]({CHENNAI_BBOX});
    way["amenity"="hospital"]({CHENNAI_BBOX});
    relation["amenity"="hospital"]({CHENNAI_BBOX});
    );
    out center;
    """

    response = requests.get(overpass_url, params={'data': overpass_query})

    ambulances = []
    hospitals = []

    if response.status_code == 200:
        data = response.json()
        i = 1

        #adding a few ambulances and hospitals for testing purpose to reduce the number of element-requests from 
        #google maps api
        for element in data['elements']:
            if i % 46 != 0:
                i += 1
                continue
            ambulance = Ambulance(i, Ambulance_type.BASIC if i%3 != 0 else Ambulance_type.ADVANCED)
            hospital = Hospital(element.get('tags', {}).get('name', 'Unknown'))

            if element['type'] == 'node':
                ambulance.latitude = element['lat']
                ambulance.longitude = element['lon']
                hospital.latitude = ambulance.latitude
                hospital.longitude = ambulance.longitude
            elif 'center' in element:
                ambulance.latitude = element['center']['lat']
                ambulance.longitude = element['center']['lon']
                hospital.latitude = ambulance.latitude
                hospital.longitude = ambulance.longitude
            else:
                continue
            
            ambulances.append(ambulance)
            hospitals.append(hospital)
            i += 1
    else:
        ambulances = [Ambulance(x, Ambulance_type.BASIC) for x in range(1,100)]

        
    callers = [Caller(str(x), "Bob") for x in range(9_120_356_632, 9_999_999_999, 1_032_789)]
    orders = [Order(amb, caller) for amb, caller in zip(ambulances[1:100:4], callers[11:555:23])]

    overpass_query = f"""
    [out:json];
    (
    node["highway"="traffic_signals"]({CHENNAI_BBOX});
    );
    out body;
    """ 

    response = requests.get(overpass_url, params={'data': overpass_query})

    if response.status_code == 200:
        data = response.json()
        for element in data['elements']:
            if element['type'] == 'node':
                lat = element['lat']
                lon = element['lon']
                point_geom = f'POINT({lat} {lon})'  # Create POINT geometry
                traffic_light = TrafficLight(
                    id = element['id'],
                    name = element['tags'].get('name', "Traffic signal"),
                    location=ST_GeomFromText(point_geom, srid=4326)
                )
                db.session.add(traffic_light)


    
    
    db.session.add_all(ambulances)
    db.session.add_all(callers)
    db.session.add_all(orders)
    db.session.add_all(hospitals)

    db.session.commit() 
    return jsonify({
        "ambulances": [ambulance.id for ambulance in ambulances],
        "callers": [caller.phone_no for caller in callers],
        "orders" : [order.order_id for order in orders],
        "hospitals": [hospital.name for hospital in hospitals]
    })

@admin.route('/update_ambulance/<int:ambulance_id>', methods=['PUT'])
def update_ambulance(ambulance_id):
    ambulance = Ambulance.query.get(ambulance_id)
    
    if not ambulance:
        return jsonify({"message": "Ambulance not found!"}), 404
    data = request.json
    ambulance_type = data.get('type')   
    is_available = data.get('isAvailable')

    if ambulance_type:
        ambulance.type = ambulance_type
    if is_available is not None: 
        ambulance.isAvailable = is_available

    db.session.commit()

    return jsonify({"message": "Ambulance updated successfully!"}), 200